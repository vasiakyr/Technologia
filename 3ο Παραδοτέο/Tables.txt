CREATE TABLE Medicine
(
med_name CHAR(20),
med_barcode INT(20),
med_cures ENUM('PONOKEFALO', 'PYRETO', 'BHXA' , 'PONOLAIMO' , 'ARTHROITIKA' , 'STOMAXOPONO'),
med_company VARCHAR(200),
med_isprescription_needed ENUM('YES' , 'NO'),
PRIMARY KEY(med_barcode)
);


CREATE TABLE Citizen(
name VARCHAR(30) NOT NULL DEFAULT 'unknown',
address VARCHAR(20) NOT NULL DEFAULT 'unknown',
area VARCHAR(20) NOT NULL DEFAULT 'unknown',
age INT(3) NOT NULL,
sex ENUM('MALE', 'FEMALE') NOT NULL,
AMKA INT(11) NOT NULL,
username VARCHAR(20) NOT NULL,
password VARCHAR(20) NOT NULL,
phone VARCHAR(20) NOT NULL,
email VARCHAR(40) NOT NULL,
PRIMARY KEY(cit_AMKA)
) engine=InnoDB;

CREATE TABLE Doctor(
name VARCHAR(30) NOT NULL DEFAULT 'unknown',
address VARCHAR(20) NOT NULL DEFAULT 'unknown',
type ENUM('PRIVATE' , 'PUBLIC') NOT NULL,
specialty ENUM('ODONTIATROS' , 'OFTHALMIATROS' , 'ORTHOPEDIKOS' , 'PATHOLOGOS' , 'ENDOKRINOLOGOS' , 'GYNAIKOLOGOS') NOT NULL,
area VARCHAR(20) NOT NULL DEFAULT 'unknown',
home_visit ENUM('YES' , 'NO') NOT NULL,
username VARCHAR(20) NOT NULL,
password VARCHAR(20) NOT NULL,
phone VARCHAR(20) NOT NULL,
email VARCHAR(40) NOT NULL,
rating INT(2) NULL,
magic_word ENUM('EYES' , 'BONES' , 'LUNGS') NOT NULL,
PRIMARY KEY(doc_username)
) engine=InnoDB;

CREATE TABLE Pharmacist(
name VARCHAR(30) NOT NULL DEFAULT 'unknown',
address VARCHAR(20) NOT NULL DEFAULT 'unknown',
area VARCHAR(20) NOT NULL DEFAULT 'unknown',
username VARCHAR(20) NOT NULL,
timetable TEXT,
password VARCHAR(20) NOT NULL,
phone VARCHAR(20) NOT NULL,
email VARCHAR(40) NOT NULL,
PRIMARY KEY(pha_username)
) engine=InnoDB;

CREATE TABLE Agenda(
ag_cit_AMKA INT(11) NOT NULL,
ag_doc_username VARCHAR(20) NOT NULL,
PRIMARY KEY(ag_cit_AMKA, ag_doc_username),
CONSTRAINT CITIZENAMKA FOREIGN KEY(ag_cit_AMKA) REFERENCES citizen(cit_AMKA)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT DOCTORUSERNAME FOREIGN KEY(ag_doc_username) REFERENCES doctor(doc_username)
ON UPDATE CASCADE ON DELETE CASCADE
)engine=InnoDB;

CREATE TABLE Review(
rev_cit_AMKA INT(11) NOT NULL,
rev_doc_username VARCHAR(20) NOT NULL,
rev_score INT(2) NOT NULL,
rev_comments TEXT,
PRIMARY KEY(rev_cit_AMKA, rev_doc_username),
CONSTRAINT CITIZEN_AMKA FOREIGN KEY(rev_cit_AMKA) REFERENCES citizen(cit_AMKA)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT DOCTOR_USERNAME FOREIGN KEY(rev_doc_username) REFERENCES doctor(doc_username)
ON UPDATE CASCADE ON DELETE CASCADE
)engine=InnoDB;

CREATE TABLE BloodDonation( 
bld_doc_username VARCHAR(20) NOT NULL,
bld_address VARCHAR(20) NOT NULL DEFAULT 'unknown',
bld_program TEXT,
PRIMARY KEY (bld_doc_username),
CONSTRAINT doctor_at FOREIGN KEY (bld_doc_username) REFERENCES doctor(doc_username) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;


CREATE TABLE Pending_Reservations(
pr_customer_name VARCHAR(20) NOT NULL DEFAULT 'unknown',
pr_number INT(20) NOT NULL,
pr_med_barcode INT(20),
PRIMARY KEY (pr_med_barcode),
CONSTRAINT MEDCODE FOREIGN KEY (pr_med_barcode) REFERENCES medicine(med_barcode) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Storage(
st_pha_name_surname VARCHAR(20) NOT NULL DEFAULT 'unknown',
st_quantity INT(20) NOT NULL,
st_med_barcode INT(20),
PRIMARY KEY (st_med_barcode),
CONSTRAINT STMEDCODE FOREIGN KEY (st_med_barcode) REFERENCES medicine(med_barcode) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Medical_Profile(
mp_cit_AMKA INT(11) NOT NULL,
mp_height FLOAT(3,2) NOT NULL,
mp_weight FLOAT(3,2) NOT NULL,
mp_blood_type ENUM('O-' , 'O+' , 'B-' , 'B+' , 'A-' , 'A+' , 'AB-' , 'AB+' ),
PRIMARY KEY (mp_cit_AMKA),
CONSTRAINT AMKA FOREIGN KEY (mp_cit_AMKA) REFERENCES citizen(cit_AMKA) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Vaccine(
va_cit_AMKA INT(11) NOT NULL,
va_doc_username VARCHAR(20) NOT NULL,
va_date DATETIME NOT NULL,
PRIMARY KEY (va_cit_AMKA , va_doc_username),
CONSTRAINT VA_AMKA FOREIGN KEY (va_cit_AMKA) REFERENCES citizen(cit_AMKA) ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT VA_USERNAME FOREIGN KEY (va_doc_username) REFERENCES doctor(doc_username) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Medical_Expenses(
me_cit_AMKA INT(11) NOT NULL,
me_value FLOAT(7,2) NOT NULL,
me_reason ENUM('Medicines' , 'Appointment'),
PRIMARY KEY (me_cit_AMKA),
CONSTRAINT ME_AMKA FOREIGN KEY (me_cit_AMKA) REFERENCES citizen(cit_AMKA) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;