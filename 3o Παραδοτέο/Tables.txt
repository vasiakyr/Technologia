CREATE TABLE Medicine
(
med_name CHAR(20),
med_barcode INT(20),
med_cures ENUM('PONOKEFALO', 'PYRETO', 'BHXA' , 'PONOLAIMO' , 'ARTHROITIKA' , 'STOMAXOPONO'),
med_company VARCHAR(200),
med_isprescription_needed ENUM('YES' , 'NO'),
PRIMARY KEY(med_barcode)
);


CREATE TABLE Citizen(
cit_name_surname VARCHAR(30) NOT NULL DEFAULT 'unknown',
cit_address VARCHAR(20) NOT NULL DEFAULT 'unknown',
cit_area VARCHAR(20) NOT NULL DEFAULT 'unknown',
cit_age INT(3) NOT NULL,
cit_sex ENUM('MALE', 'FEMALE') NOT NULL,
cit_AMKA INT(11) NOT NULL,
cit_username VARCHAR(20) NOT NULL,
cit_password VARCHAR(20) NOT NULL,
cit_phone VARCHAR(20) NOT NULL,
cit_email VARCHAR(40) NOT NULL,
PRIMARY KEY(cit_AMKA)
) engine=InnoDB;

CREATE TABLE Doctor(
doc_name_surname VARCHAR(30) NOT NULL DEFAULT 'unknown',
doc_address VARCHAR(20) NOT NULL DEFAULT 'unknown',
doc_type ENUM('PRIVATE' , 'PUBLIC') NOT NULL,
doc_specialty ENUM('ODONTIATROS' , 'OFTHALMIATROS' , 'ORTHOPEDIKOS' , 'PATHOLOGOS' , 'ENDOKRINOLOGOS' , 'GYNAIKOLOGOS') NOT NULL,
doc_area VARCHAR(20) NOT NULL DEFAULT 'unknown',
doc_home_visit ENUM('YES' , 'NO') NOT NULL,
doc_username VARCHAR(20) NOT NULL,
doc_password VARCHAR(20) NOT NULL,
doc_phone VARCHAR(20) NOT NULL,
doc_email VARCHAR(40) NOT NULL,
doc_rating INT(2) NULL,
doc_magic_word ENUM('EYES' , 'BONES' , 'LUNGS') NOT NULL,
PRIMARY KEY(doc_username)
) engine=InnoDB;

CREATE TABLE Pharmacist(
pha_name_surname VARCHAR(30) NOT NULL DEFAULT 'unknown',
pha_address VARCHAR(20) NOT NULL DEFAULT 'unknown',
pha_area VARCHAR(20) NOT NULL DEFAULT 'unknown',
pha_username VARCHAR(20) NOT NULL,
pha_timetable TEXT,
pha_password VARCHAR(20) NOT NULL,
pha_phone VARCHAR(20) NOT NULL,
pha_email VARCHAR(40) NOT NULL,
PRIMARY KEY(pha_username)
) engine=InnoDB;

CREATE TABLE Agenda(
ag_cit_AMKA INT(11) NOT NULL,
ag_doc_username VARCHAR(20) NOT NULL,
PRIMARY KEY(ag_cit_AMKA, ag_doc_username),
CONSTRAINT CITIZENAMKA FOREIGN KEY(ag_cit_AMKA) REFERENCES citizen(cit_AMKA)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT DOCTORUSERNAME FOREIGN KEY(ag_doc_username) REFERENCES doctor(doc_username)
ON UPDATE CASCADE ON DELETE CASCADE
)engine=InnoDB;

CREATE TABLE Review(
rev_cit_AMKA INT(11) NOT NULL,
rev_doc_username VARCHAR(20) NOT NULL,
rev_score INT(2) NOT NULL,
rev_comments TEXT,
PRIMARY KEY(rev_cit_AMKA, rev_doc_username),
CONSTRAINT CITIZEN_AMKA FOREIGN KEY(rev_cit_AMKA) REFERENCES citizen(cit_AMKA)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT DOCTOR_USERNAME FOREIGN KEY(rev_doc_username) REFERENCES doctor(doc_username)
ON UPDATE CASCADE ON DELETE CASCADE
)engine=InnoDB;

CREATE TABLE BloodDonation( 
bld_doc_username VARCHAR(20) NOT NULL,
bld_address VARCHAR(20) NOT NULL DEFAULT 'unknown',
bld_program TEXT,
PRIMARY KEY (bld_doc_username),
CONSTRAINT doctor_at FOREIGN KEY (bld_doc_username) REFERENCES doctor(doc_username) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;


CREATE TABLE Pending_Reservations(
pr_customer_name VARCHAR(20) NOT NULL DEFAULT 'unknown',
pr_number INT(20) NOT NULL,
pr_med_barcode INT(20),
PRIMARY KEY (pr_med_barcode),
CONSTRAINT MEDCODE FOREIGN KEY (pr_med_barcode) REFERENCES medicine(med_barcode) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Storage(
st_pha_name_surname VARCHAR(20) NOT NULL DEFAULT 'unknown',
st_quantity INT(20) NOT NULL,
st_med_barcode INT(20),
PRIMARY KEY (st_med_barcode),
CONSTRAINT STMEDCODE FOREIGN KEY (st_med_barcode) REFERENCES medicine(med_barcode) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Medical_Profile(
mp_cit_AMKA INT(11) NOT NULL,
mp_height FLOAT(3,2) NOT NULL,
mp_weight FLOAT(3,2) NOT NULL,
mp_blood_type ENUM('O-' , 'O+' , 'B-' , 'B+' , 'A-' , 'A+' , 'AB-' , 'AB+' ),
PRIMARY KEY (mp_cit_AMKA),
CONSTRAINT AMKA FOREIGN KEY (mp_cit_AMKA) REFERENCES citizen(cit_AMKA) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Vaccine(
va_cit_AMKA INT(11) NOT NULL,
va_doc_username VARCHAR(20) NOT NULL,
va_date DATETIME NOT NULL,
PRIMARY KEY (va_cit_AMKA , va_doc_username),
CONSTRAINT VA_AMKA FOREIGN KEY (va_cit_AMKA) REFERENCES citizen(cit_AMKA) ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT VA_USERNAME FOREIGN KEY (va_doc_username) REFERENCES doctor(doc_username) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE Medical_Expenses(
me_cit_AMKA INT(11) NOT NULL,
me_value FLOAT(7,2) NOT NULL,
me_reason ENUM('Medicines' , 'Appointment'),
PRIMARY KEY (me_cit_AMKA),
CONSTRAINT ME_AMKA FOREIGN KEY (me_cit_AMKA) REFERENCES citizen(cit_AMKA) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;